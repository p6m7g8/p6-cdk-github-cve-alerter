import { awscdk, JsonFile } from 'projen';
const project = new awscdk.AwsCdkTypeScriptApp({
  cdkVersion: '2.15.0',
  defaultReleaseBranch: 'main',
  name: 'p6-cdk-github-cve-alerter-app',

  projenrcTs: true,
  gitpod: true,
  devContainer: true,
  codeCov: true,
  releaseFailureIssue: true,
  autoApproveUpgrades: true,
  autoApproveOptions: {
    allowedUsernames: ['p6m7g8-automation'],
  },

  eslintOptions: {
    dirs: ['src'],
    ignorePatterns: ['src/generated'],
  },

  devDeps: [
    '@graphql-codegen/cli',
    '@graphql-codegen/introspection',
    '@graphql-codegen/typescript',
    '@graphql-codegen/typescript-document-nodes',
    '@graphql-codegen/typescript-operations',
    '@graphql-codegen/typescript-resolvers',
    '@octokit/graphql-schema',
  ],

  deps: [
    '@types/aws-lambda',
    'apollo-cache-inmemory',
    'apollo-client',
    'apollo-link-http',
    'cross-fetch',
    'graphql',
    'graphql-tag',
  ],
});

new JsonFile(project, '.markdownlint.json', {
  obj: {
    'default': true,
    'commands-show-output': false,
    'line-length': {
      line_length: 200,
    },
  },
});

project.synth();
